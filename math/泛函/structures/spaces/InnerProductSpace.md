# 内积空间（Inner Product Space）

## 1. 一句话
- 在线性空间上加入“角度/投影”结构；内积诱导范数与度量，使几何直觉（正交、投影、最小二乘）可计算。
距离 
角度/相似度 
正交：||x+y||^2 = <x+y, x+y> = <x+y, x+y> = <x,x> + <x,y> + <y,x> + <y,y> = <x,x> + <y,y> = ||x||^2 + ||y||^2



## 2. 定义（把“角度/长度”公理化）
设 `V` 是实或复向量空间。一个映射 `⟨·,·⟩: V×V -> R`（实情形）或 `⟨·,·⟩: V×V -> C`（复情形）称为 **内积（inner product）**，如果对任意 `x,y,z∈V` 与标量 `α` 满足：

- **线性/共轭线性**（常见约定：对第一个变量线性）：
  - `⟨αx + y, z⟩ = α⟨x,z⟩ + ⟨y,z⟩`
  - `⟨x, αy + z⟩ = conj(α)⟨x,y⟩ + ⟨x,z⟩`
  - 若你采用“第二个变量线性”的约定，上面两条对调即可；结论不变，只是共轭出现的位置换了。
- **共轭对称**：`⟨x,y⟩ = conj(⟨y,x⟩)`（实情形退化为对称 `⟨x,y⟩=⟨y,x⟩`）
- **正定**：`⟨x,x⟩ ≥ 0` 且 `⟨x,x⟩ = 0 <=> x=0`

### 2.1 由内积诱导范数与度量
- **范数**：`||x|| := sqrt(⟨x,x⟩)`
- **度量**：`d(x,y) := ||x-y||`

因此每个内积空间天然是赋范空间；若在该范数下完备，则成为 Hilbert 空间（见 `math/泛函/structures/spaces/HilbertSpace.md`）。

## 3. 例子（把公式写具体）
- `R^n`：`<x,y> = sum_{i=1}^n x_i y_i`
- `C^n`：`<x,y> = sum_{i=1}^n x_i * conj(y_i)`（按“第一个变量线性”的约定）
- `L^2(Ω)`：`<f,g> = ∫_Ω f(x) * conj(g(x)) dμ(x)`  
  注意：`L^2` 的元素是“几乎处处相等”的等价类。

## 4. 关键性质（为什么内积=强结构）
### 4.1 Cauchy–Schwarz（角度存在的根本）
- `|⟨x,y⟩| ≤ ||x||·||y||`

它直接推出范数的三角不等式，并控制投影与误差。

### 4.2 正交与毕达哥拉斯
- **正交**：`x ⟂ y` ⇔ `⟨x,y⟩=0`
- 若 `x ⟂ y`，则 `||x+y||^2 = ||x||^2 + ||y||^2`

### 4.3 投影（projection）
对非零向量 `u`，在 `span{u}` 上的投影：
- `proj_u(x) := (⟨x,u⟩/⟨u,u⟩) u`
- 并且 `x - proj_u(x) ⟂ u`

更一般地，对任意有限维子空间 `W`，每个 `x` 都能唯一分解为
- `x = w + w_perp`，其中 `w∈W` 且 `w_perp ⟂ W`

“对任意闭子空间都能正交投影”的版本需要完备性（Hilbert 空间投影定理）。

### 4.4 正交归一与 Gram–Schmidt
- **正交归一组（orthonormal set）**：`⟨e_i,e_j⟩=0(i≠j)` 且 `||e_i||=1`
- Gram–Schmidt：在有限维内积空间中，可把任意线性无关组正交归一化（所以能“选好坐标”）。

## 5. 反过来：由范数识别内积（速查）
不是每个范数都来自内积。内积诱导的范数一定满足 **平行四边形恒等式**：
- `||x+y||^2 + ||x-y||^2 = 2||x||^2 + 2||y||^2`

并且可用 **极化恒等式（polarization identity）** 从范数恢复内积：
- 实情形：`⟨x,y⟩ = (||x+y||^2 - ||x-y||^2)/4`
- 复情形：`⟨x,y⟩ = (1/4) * sum_{k=0}^3 i^k ||x + i^k y||^2`

## 6. 常见误区（快速避坑）
- 线性变量有两种约定（第一变量线性 or 第二变量线性），别把共轭放错位置。
- `L^2` 里“等于 0”通常是几乎处处为 0，不是逐点处处为 0。
- 内积空间不一定完备；Hilbert 空间 = 内积空间 +（内积诱导范数下）完备。
